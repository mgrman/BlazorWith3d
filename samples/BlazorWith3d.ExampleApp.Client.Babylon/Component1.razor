@using Microsoft.JSInterop
@inject IJSRuntime JsRuntime

<canvas @ref="_containerElementReference" class="my-component"  width="960" height="600" tabindex="-1">
    This component is defined in the <strong>BlazorWith3d.ExampleApp.Client.Babylon</strong> library.
</canvas>


@* <script type="module" src="./_content/BlazorWith3d.ExampleApp.Client.Babylon/js/file1.js"></script> *@

@code{

    private ElementReference _containerElementReference;
    private IJSObjectReference module;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (!firstRender)
        {
            await base.OnAfterRenderAsync(firstRender);
            return;
        }


        var moduleTask = new Lazy<Task<IJSObjectReference>>(() => JsRuntime.InvokeAsync
        <IJSObjectReference>
            ("import", Assets["./_content/BlazorWith3d.ExampleApp.Client.Babylon/assets/index.js"]).AsTask());
        module = await moduleTask.Value;

        await base.OnAfterRenderAsync(firstRender);
    }
}

           